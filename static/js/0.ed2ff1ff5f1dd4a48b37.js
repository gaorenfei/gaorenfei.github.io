webpackJsonp([0],{1002:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"quotes"}},[0!=e.normsList.length?s("table",{staticClass:"all"},[s("tr",[e._l(e.normsList,function(t){return s("th",{staticClass:"norm_fix"},[e._v("\n                "+e._s(t.specName)+"\n            ")])}),e._v(" "),s("th",{staticClass:"n_promotion"},[e._m(0),e._v(" "),s("el-checkbox",{staticClass:"pro_price_checked",on:{change:e.proPriceChecked},model:{value:e.proPriceCheckedState,callback:function(t){e.proPriceCheckedState=t},expression:"proPriceCheckedState"}},[e._v("全部相同")])],1),e._v(" "),e._m(1),e._v(" "),s("th",{staticClass:"n_original"},[e._m(2),e._v(" "),s("el-checkbox",{staticClass:"old_price_checked",on:{change:e.oldPriceChecked},model:{value:e.oldPriceCheckedState,callback:function(t){e.oldPriceCheckedState=t},expression:"oldPriceCheckedState"}},[e._v("全部相同")])],1),e._v(" "),e._m(3),e._v(" "),s("th",{staticClass:"n_image"},[e._v("\n                匹配图片\n            ")])],2),e._v(" "),e._l(e.doneQuotesList.specPrices,function(t,i){return s("tr",[e._l(e.normsList,function(o,n){return 0==n&&i%e.rowspan==0?s("td",{attrs:{rowspan:e.rowspan}},[e._v("\n                "+e._s(t.specValues[n])+"\n            ")]):1==n&&i*e.normsList[1].specValues.length%e.rowspan==0?s("td",{attrs:{rowspan:e.rowspan/e.normsList[1].specValues.length}},[e._v("\n                "+e._s(t.specValues[n])+"\n            ")]):2==n?s("td",[e._v("\n                "+e._s(t.specValues[n])+"\n            ")]):e._e()}),e._v(" "),s("td",[s("el-input",{staticStyle:{width:"80%"},attrs:{size:"mini",placeholder:"请输入内容",disabled:!t.isExist||0!=i&&e.proPriceCheckedState,maxlength:8},on:{blur:function(s){e.isNumPrice(t.proPrice,i)}},model:{value:t.proPrice,callback:function(e){t.proPrice="string"==typeof e?e.trim():e},expression:"row.proPrice"}})],1),e._v(" "),s("td",[s("el-input",{staticStyle:{width:"80%"},attrs:{size:"mini",placeholder:"请输入内容",disabled:!t.isExist,maxlength:8},on:{blur:function(s){e.isNumIntegral(t.usedIntegral,i)}},model:{value:t.usedIntegral,callback:function(e){t.usedIntegral="string"==typeof e?e.trim():e},expression:"row.usedIntegral"}})],1),e._v(" "),s("td",[s("el-input",{staticStyle:{width:"80%"},attrs:{size:"mini",placeholder:"请输入内容",disabled:!t.isExist||0!=i&&e.oldPriceCheckedState,maxlength:8},on:{blur:function(s){e.isNumOldPrice(t.marketPrice,i)}},model:{value:t.marketPrice,callback:function(e){t.marketPrice="string"==typeof e?e.trim():e},expression:"row.marketPrice"}})],1),e._v(" "),s("td",[s("el-checkbox",{on:{change:function(s){e.isCommoditychecked(t.isExist,i)}},model:{value:t.isExist,callback:function(e){t.isExist=e},expression:"row.isExist"}})],1),e._v(" "),s("td",[s("el-upload",{staticClass:"upload-demo",staticStyle:{display:"inline-block"},attrs:{action:"","on-change":e.upNormsPic,"show-file-list":!1,"auto-upload":!1}},[s("el-button",{attrs:{type:"text",disabled:!t.isExist},on:{click:function(t){e.nowRowIndex=i}}},[e._v(e._s(""===t.picId?"点击上传":"更改图片"))])],1),e._v(" "),s("el-button",{attrs:{type:"text",disabled:!t.isExist},on:{click:function(t){e.showPictureCardPreview(i)}}},[e._v("查看")]),e._v(" "),s("el-dialog",{attrs:{size:"tiny","modal-append-to-body":!1},on:{open:function(t){e.$store.commit("openZindexModel")},close:function(t){e.$store.commit("closeZindexModel")}},model:{value:e.dialogFull,callback:function(t){e.dialogFull=t},expression:"dialogFull"}},[s("img",{attrs:{width:"100%",src:e.fullUrl,alt:""}})])],1)],2)})],2):s("table",{staticClass:"only"},[e._m(4),e._v(" "),e._l(e.doneQuotesList.specPrices,function(t,i){return s("tr",[s("td",[s("el-input",{staticStyle:{width:"80%"},attrs:{size:"mini",placeholder:"请输入内容",maxlength:8},on:{blur:function(s){e.isNumPrice(t.proPrice,i)}},model:{value:t.proPrice,callback:function(e){t.proPrice="string"==typeof e?e.trim():e},expression:"row.proPrice"}})],1),e._v(" "),s("td",[s("el-input",{staticStyle:{width:"80%"},attrs:{size:"mini",placeholder:"请输入内容",maxlength:8},on:{blur:function(s){e.isNumIntegral(t.usedIntegral,i)}},model:{value:t.usedIntegral,callback:function(e){t.usedIntegral="string"==typeof e?e.trim():e},expression:"row.usedIntegral"}})],1),e._v(" "),s("td",[s("el-input",{staticStyle:{width:"80%"},attrs:{size:"mini",placeholder:"请输入内容",maxlength:8},on:{blur:function(s){e.isNumOldPrice(t.marketPrice,i)}},model:{value:t.marketPrice,callback:function(e){t.marketPrice="string"==typeof e?e.trim():e},expression:"row.marketPrice"}})],1)])})],2)])},staticRenderFns:[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("i",[e._v("*")]),e._v("促销价格")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("th",{staticClass:"n_integral"},[s("i",[e._v("*")]),e._v("积分最高抵用金额\n            ")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("i",[e._v("*")]),e._v("原价")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("th",{staticClass:"n_commodity"},[s("i",[e._v("*")]),e._v("是否有该规格商品\n            ")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("tr",[s("th",{staticClass:"n_promotion"},[s("span",[s("i",[e._v("*")]),e._v("促销价格")])]),e._v(" "),s("th",{staticClass:"n_integral"},[s("i",[e._v("*")]),e._v("积分最高抵用金额\n            ")]),e._v(" "),s("th",{staticClass:"n_original"},[s("span",[s("i",[e._v("*")]),e._v("原价")])])])}]}},988:function(e,t,s){s(998);var i=s(1)(s(992),s(1002),"data-v-22709bbe",null);e.exports=i.exports},992:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(112),o=s.n(i);t.default={data:function(){return{count:0,normsList:this.norms,doneQuotesList:{specIds:[],specNames:[],specPrices:[{proPrice:"",usedIntegral:"",marketPrice:""}]},rowspan:0,proPriceCheckedState:!1,oldPriceCheckedState:!1,onlyQuotes:{proPrice:"",usedIntegral:"",marketPrice:""},fullUrl:"",dialogFull:!1,nowRowIndex:0}},props:["norms","copyQuotesInfo"],created:function(){""===this.$route.query.goodId&&this.count++,this.$emit("update:doneQuotesList",this.doneQuotesList)},methods:{createNormsTab:function(e){for(var t=[],s=0;s<e;s++){var i={specValues:[],proPrice:"",usedIntegral:"",marketPrice:"",isExist:!0,picId:"",url:"",baseUrl:""};t.push(i)}return{specIds:[],specNames:[],specPrices:t}},isNumPrice:function(e,t){if(""!==e){var s=parseFloat(e)+"";if(/^\d+(\.\d+)?$/.test(e))if("0"===s)this.doneQuotesList.specPrices[t].proPrice="",this.$message({message:"不能为0",duration:1e3,type:"info"});else if(s.length>5)this.doneQuotesList.specPrices[t].proPrice="",this.$message({message:"不能超过5位",duration:1e3,type:"info"});else if(this.doneQuotesList.specPrices[t].proPrice=(+e).toFixed(2),this.proPriceCheckedState)for(var i=0,o=this.doneQuotesList.specPrices.length;i<o;i++)this.doneQuotesList.specPrices[i].proPrice=this.doneQuotesList.specPrices[0].proPrice,""===this.doneQuotesList.specPrices[i].usedIntegral&&(this.doneQuotesList.specPrices[i].usedIntegral=this.doneQuotesList.specPrices[i].proPrice);else""===this.doneQuotesList.specPrices[t].usedIntegral&&(this.doneQuotesList.specPrices[t].usedIntegral=this.doneQuotesList.specPrices[t].proPrice);else this.doneQuotesList.specPrices[t].proPrice="",this.$message({message:"请输入数字",duration:1e3,type:"info"})}},isNumIntegral:function(e,t){if(""!==e){var s=parseFloat(e)+"";/^\d+(\.\d+)?$/.test(e)?s.length>5?(this.doneQuotesList.specPrices[t].usedIntegral="",this.$message({message:"不能超过5位",duration:1e3,type:"info"})):this.doneQuotesList.specPrices[t].usedIntegral=(+e).toFixed(2):(this.doneQuotesList.specPrices[t].usedIntegral="",this.$message({message:"请输入数字",duration:1e3,type:"info"}))}},isNumOldPrice:function(e,t){if(""!==e){var s=parseFloat(e)+"";if(/^\d+(\.\d+)?$/.test(e)){if("0"===s)this.doneQuotesList.specPrices[t].marketPrice="",this.$message({message:"不能为0",duration:1e3,type:"info"});else if(s.length>5)this.doneQuotesList.specPrices[t].marketPrice="",this.$message({message:"不能超过5位",duration:1e3,type:"info"});else if(this.doneQuotesList.specPrices[t].marketPrice=(+e).toFixed(2),this.oldPriceCheckedState)for(var i=1,o=this.doneQuotesList.specPrices.length;i<o;i++)this.doneQuotesList.specPrices[i].marketPrice=this.doneQuotesList.specPrices[0].marketPrice}else this.doneQuotesList.specPrices[t].marketPrice="",this.$message({message:"请输入数字",duration:1e3,type:"info"})}},proPriceChecked:function(){if(this.proPriceCheckedState)for(var e=0,t=this.doneQuotesList.specPrices.length;e<t;e++)e>0&&(this.doneQuotesList.specPrices[e].proPrice=this.doneQuotesList.specPrices[0].proPrice),""===this.doneQuotesList.specPrices[e].usedIntegral&&(this.doneQuotesList.specPrices[e].usedIntegral=this.doneQuotesList.specPrices[e].proPrice)},oldPriceChecked:function(){if(this.oldPriceCheckedState)for(var e=1,t=this.doneQuotesList.specPrices.length;e<t;e++)this.doneQuotesList.specPrices[e].marketPrice=this.doneQuotesList.specPrices[0].marketPrice},isCommoditychecked:function(e,t){e?(this.proPriceCheckedState&&(this.doneQuotesList.specPrices[t].proPrice=this.doneQuotesList.specPrices[0].proPrice),this.oldPriceCheckedState&&(this.doneQuotesList.specPrices[t].marketPrice=this.doneQuotesList.specPrices[0].marketPrice)):(this.doneQuotesList.specPrices[t].proPrice="",this.doneQuotesList.specPrices[t].usedIntegral="",this.doneQuotesList.specPrices[t].marketPrice="",this.doneQuotesList.specPrices[t].picId="",this.doneQuotesList.specPrices[t].url="",this.doneQuotesList.specPrices[t].baseUrl="")},upNormsPic:function(e,t){var s=this,i="image/jpeg"===e.raw.type||"image/png"===e.raw.type,o=e.size/1024/1024<2;if(!i)return this.$message({message:"注意! 上传的图片只能是JPG或者PNG",duration:1e3,type:"warning"}),!1;if(!o)return this.$message({message:"注意! 上传的图片大小不能超过 2MB!",duration:1e3,type:"warning"}),!1;var n=new Image;n.onload=function(){var t=void 0,i=n.width,o=n.height;if(t=i/o,!(t=.8<t&&t<1.2&&i>360&&o>360))return s.$message({message:"注意! 上传的图片宽高比要接近1：1,并且尺寸大于360",duration:1e3,type:"warning"}),!1;var r=new FormData;r.append("file",e.raw),s.$http({url:"/photosController/addPhotos.do",method:"post",data:r}).then(function(t){t.data.success?(s.doneQuotesList.specPrices[s.nowRowIndex].picId=t.data.data.fileid,s.doneQuotesList.specPrices[s.nowRowIndex].url=t.data.data.fileurl,s.doneQuotesList.specPrices[s.nowRowIndex].baseUrl=e.url,s.$message({message:"图片上传成功",duration:1e3,type:"success"})):s.$message({message:"图片上传失败",duration:1e3,type:"error"})}).catch(function(e){console.log(e),s.$message({message:"操作失败",duration:1e3,type:"error"})})},n.src=e.url},showPictureCardPreview:function(e){if(""===this.doneQuotesList.specPrices[e].baseUrl)return void this.$message({message:"注意! 请确保上传了图片。",duration:1e3,type:"warning"});this.fullUrl=this.doneQuotesList.specPrices[e].baseUrl,this.dialogFull=!0}},watch:{norms:{handler:function(e,t){if(this.normsList=e,0==this.normsList.length)this.doneQuotesList={specIds:[],specNames:[],specPrices:[]};else if(1==this.normsList.length){this.rowspan=1;var s=this.normsList[0].specValues.length;this.doneQuotesList=this.createNormsTab(s)}else if(2==this.normsList.length){this.rowspan=this.normsList[1].specValues.length;var i=this.normsList[0].specValues.length,o=this.normsList[1].specValues.length;this.doneQuotesList=this.createNormsTab(i*o)}else if(3==this.normsList.length){this.rowspan=this.normsList[1].specValues.length*this.normsList[2].specValues.length;var n=this.normsList[0].specValues.length,r=this.normsList[1].specValues.length,a=this.normsList[2].specValues.length;this.doneQuotesList=this.createNormsTab(n*r*a)}this.count++},deep:!0},doneQuotesList:function(e,t){if(this.count>1){var s=[];if(0==this.normsList.length){for(var i in this.onlyQuotes)this.onlyQuotes[i]="";return this.doneQuotesList.specPrices.push(this.onlyQuotes),void this.$emit("update:doneQuotesList",this.doneQuotesList)}if(1==this.normsList.length){this.doneQuotesList.specIds=[this.normsList[0].specId],this.doneQuotesList.specNames=[this.normsList[0].specName];for(var n=0;n<this.normsList[0].specValues.length;n++)s.push({specValues:[this.normsList[0].specValues[n]]})}else if(2==this.normsList.length){this.doneQuotesList.specIds=[this.normsList[0].specId,this.normsList[1].specId],this.doneQuotesList.specNames=[this.normsList[0].specName,this.normsList[1].specName];for(var r=0;r<this.normsList[0].specValues.length;r++)for(var a=0;a<this.normsList[1].specValues.length;a++)s.push({specValues:[this.normsList[0].specValues[r],this.normsList[1].specValues[a]]})}else if(3==this.normsList.length){this.doneQuotesList.specIds=[this.normsList[0].specId,this.normsList[1].specId,this.normsList[2].specId],this.doneQuotesList.specNames=[this.normsList[0].specName,this.normsList[1].specName,this.normsList[2].specName];for(var c=0;c<this.normsList[0].specValues.length;c++)for(var l=0;l<this.normsList[1].specValues.length;l++)for(var u=0;u<this.normsList[2].specValues.length;u++)s.push({specValues:[this.normsList[0].specValues[c],this.normsList[1].specValues[l],this.normsList[2].specValues[u]]})}for(var d=0,p=this.doneQuotesList.specPrices.length;d<p;d++)this.doneQuotesList.specPrices[d].specValues=s[d].specValues;if("{}"!==o()(t)&&t.specPrices.length>0)for(var h=0,m=this.doneQuotesList.specPrices.length;h<m;h++){for(var g=0,b=t.specPrices.length;g<b;g++)if(this.doneQuotesList.specPrices[h].specValues.join(",")==t.specPrices[g].specValues.join(",")){this.doneQuotesList.specPrices[h]=t.specPrices[g];break}this.proPriceCheckedState&&(this.doneQuotesList.specPrices[h].proPrice=this.doneQuotesList.specPrices[0].proPrice,""===this.doneQuotesList.specPrices[h].usedIntegral&&(this.doneQuotesList.specPrices[h].usedIntegral=this.doneQuotesList.specPrices[h].proPrice)),this.oldPriceCheckedState&&(this.doneQuotesList.specPrices[h].marketPrice=this.doneQuotesList.specPrices[0].marketPrice)}}else this.doneQuotesList=this.copyQuotesInfo;this.$emit("update:doneQuotesList",this.doneQuotesList)},copyQuotesInfo:function(e,t){this.doneQuotesList=e}}}},994:function(e,t,s){t=e.exports=s(983)(),t.push([e.i,"#quotes[data-v-22709bbe]{text-align:center}#quotes i[data-v-22709bbe]{color:#ff6161}#quotes table[data-v-22709bbe]{width:100%}#quotes table th[data-v-22709bbe]{height:50px;line-height:50px;position:relative}#quotes table td[data-v-22709bbe]{height:40px;line-height:40px}#quotes table[data-v-22709bbe],#quotes td[data-v-22709bbe],#quotes th[data-v-22709bbe],#quotes tr[data-v-22709bbe]{border:1px solid #ccc}#quotes table.all .norm_fix[data-v-22709bbe]{width:7.84314%}#quotes table.all .n_promotion[data-v-22709bbe]{width:15.68627%}#quotes table.all .n_promotion>span[data-v-22709bbe]{position:absolute;left:0;right:0;top:-10px;margin:auto}#quotes table.all .n_promotion .pro_price_checked[data-v-22709bbe]{position:absolute;left:0;right:0;bottom:-10px;margin:auto}#quotes table.all .n_integral[data-v-22709bbe],#quotes table.all .n_original[data-v-22709bbe]{width:15.68627%}#quotes table.all .n_original>span[data-v-22709bbe]{position:absolute;left:0;right:0;top:-10px;margin:auto}#quotes table.all .n_original .old_price_checked[data-v-22709bbe]{position:absolute;left:0;right:0;bottom:-10px;margin:auto}#quotes table.all .n_commodity[data-v-22709bbe],#quotes table.all .n_image[data-v-22709bbe]{width:14.21569%}#quotes table.only[data-v-22709bbe]{width:600px}","",{version:3,sources:["C:/Users/Administrator.SKY-20170418RHL/Desktop/crm/crm/分支/crm-web/src/components/common/integral/commodity/commodity_all/Quotes.vue"],names:[],mappings:"AACA,yBACE,iBAAmB,CACpB,AACD,2BACI,aAAe,CAClB,AACD,+BACI,UAAY,CACf,AACD,kCACM,YAAa,AACb,iBAAkB,AAClB,iBAAmB,CACxB,AACD,kCACM,YAAa,AACb,gBAAkB,CACvB,AACD,mHACI,qBAAuB,CAC1B,AACD,6CACI,cAAgB,CACnB,AACD,gDACI,eAAiB,CACpB,AACD,qDACM,kBAAmB,AACnB,OAAQ,AACR,QAAS,AACT,UAAW,AACX,WAAa,CAClB,AACD,mEACM,kBAAmB,AACnB,OAAQ,AACR,QAAS,AACT,aAAc,AACd,WAAa,CAClB,AAID,8FACI,eAAiB,CACpB,AACD,oDACM,kBAAmB,AACnB,OAAQ,AACR,QAAS,AACT,UAAW,AACX,WAAa,CAClB,AACD,kEACM,kBAAmB,AACnB,OAAQ,AACR,QAAS,AACT,aAAc,AACd,WAAa,CAClB,AAID,4FACI,eAAiB,CACpB,AACD,oCACI,WAAa,CAChB",file:"Quotes.vue",sourcesContent:["\n#quotes[data-v-22709bbe] {\n  text-align: center;\n}\n#quotes i[data-v-22709bbe] {\n    color: #ff6161;\n}\n#quotes table[data-v-22709bbe] {\n    width: 100%;\n}\n#quotes table th[data-v-22709bbe] {\n      height: 50px;\n      line-height: 50px;\n      position: relative;\n}\n#quotes table td[data-v-22709bbe] {\n      height: 40px;\n      line-height: 40px;\n}\n#quotes table[data-v-22709bbe], #quotes th[data-v-22709bbe], #quotes tr[data-v-22709bbe], #quotes td[data-v-22709bbe] {\n    border: 1px solid #ccc;\n}\n#quotes table.all .norm_fix[data-v-22709bbe] {\n    width: 7.84314%;\n}\n#quotes table.all .n_promotion[data-v-22709bbe] {\n    width: 15.68627%;\n}\n#quotes table.all .n_promotion > span[data-v-22709bbe] {\n      position: absolute;\n      left: 0;\n      right: 0;\n      top: -10px;\n      margin: auto;\n}\n#quotes table.all .n_promotion .pro_price_checked[data-v-22709bbe] {\n      position: absolute;\n      left: 0;\n      right: 0;\n      bottom: -10px;\n      margin: auto;\n}\n#quotes table.all .n_integral[data-v-22709bbe] {\n    width: 15.68627%;\n}\n#quotes table.all .n_original[data-v-22709bbe] {\n    width: 15.68627%;\n}\n#quotes table.all .n_original > span[data-v-22709bbe] {\n      position: absolute;\n      left: 0;\n      right: 0;\n      top: -10px;\n      margin: auto;\n}\n#quotes table.all .n_original .old_price_checked[data-v-22709bbe] {\n      position: absolute;\n      left: 0;\n      right: 0;\n      bottom: -10px;\n      margin: auto;\n}\n#quotes table.all .n_commodity[data-v-22709bbe] {\n    width: 14.21569%;\n}\n#quotes table.all .n_image[data-v-22709bbe] {\n    width: 14.21569%;\n}\n#quotes table.only[data-v-22709bbe] {\n    width: 600px;\n}\n"],sourceRoot:""}])},998:function(e,t,s){var i=s(994);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);s(984)("3da3566a",i,!0)}});
//# sourceMappingURL=0.ed2ff1ff5f1dd4a48b37.js.map